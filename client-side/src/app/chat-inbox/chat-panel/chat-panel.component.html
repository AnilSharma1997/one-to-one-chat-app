<div class="chat-container">
  <header class="chat-header">
    <h1 style="margin-left: 4%;"> ChatApp</h1>
    <h1 style="margin-left: 4%;"> {{username}}</h1>
    <a class="btn" (click)="leave()">Leave Room</a>
  </header>

  <main class="chat-main">
    <div class="chat-sidebar">
      <h3><i class="fas fa-users"></i> Users</h3>
      <ul id="users" >
        <ng-container *ngFor="let user of users">
          <li class="userlist" *ngIf="user.username == selectedUser" (click)="clickOnUser(user)" style="background: lightgray;">{{user.username}} </li>
          <li class="userlist" *ngIf="user.username != selectedUser" (click)="clickOnUser(user)">{{user.username}} </li>
        </ng-container>
        
      </ul>
    </div>
    <div class="chat-messages">
        <div *ngIf="selectedUser" class="selected-user">
          <img src="assets/user.png" class="avatar" />
          {{selectedUser}}
        </div>
        <div *ngFor="let msg of messageArray; let i = index" class="message">
          <p class="meta">{{msg.username}} <span>{{msg.time}}</span></p>
          <p class="text">
            {{msg.text.message}}
          </p>
        </div>
        <div id="target" style="display: block;">
          <p style="color: white;">.</p>
        </div>
    </div>
  </main>
  <div class="chat-form-container">
    <form id="chat-form">
      <input id="msg" type="text" placeholder="Enter Message" [(ngModel)]="messageText" [ngModelOptions]="{standalone: true}"
        required autocomplete="off"/>
      <button class="btn" (click)="sendMessage()"><i class="fas fa-paper-plane"></i> Send</button>
    </form>
  </div>
</div>